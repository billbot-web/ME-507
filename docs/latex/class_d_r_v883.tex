\doxysection{DRV883 Class Reference}
\hypertarget{class_d_r_v883}{}\label{class_d_r_v883}\index{DRV883@{DRV883}}


{\ttfamily \#include $<$DRV883.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_d_r_v883_a9c1bcac4457ad2ec606785ffb6a63a9a}{DRV883}} (int in1, int in2, int ledc\+Ch1, int ledc\+Ch2, uint32\+\_\+t pwm\+Freq=20000, uint8\+\_\+t resolution\+Bits=10)
\begin{DoxyCompactList}\small\item\em Construct a new \doxylink{class_motor_d_r_v883}{Motor\+DRV883} object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_d_r_v883_a7e8c99a162d755bb37a0466f13aba844}{set\+Eff}} (int effort)
\begin{DoxyCompactList}\small\item\em Set motor effort. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_d_r_v883_a50bfd9a9b5f3368ffc8aa5b39a4bc623}{stop}} ()
\begin{DoxyCompactList}\small\item\em Stop the motor (same as set\+Eff(0)) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_d_r_v883_af60168e33988e1cb01734c692d48af94}{brake}} ()
\begin{DoxyCompactList}\small\item\em Brake the motor (active braking by shorting both windings) \end{DoxyCompactList}\end{DoxyCompactItemize}


\label{doc-constructors}
\Hypertarget{class_d_r_v883_doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_d_r_v883_a9c1bcac4457ad2ec606785ffb6a63a9a}\index{DRV883@{DRV883}!DRV883@{DRV883}}
\index{DRV883@{DRV883}!DRV883@{DRV883}}
\doxysubsubsection{\texorpdfstring{DRV883()}{DRV883()}}
{\footnotesize\ttfamily \label{class_d_r_v883_a9c1bcac4457ad2ec606785ffb6a63a9a} 
DRV883\+::\+DRV883 (\begin{DoxyParamCaption}\item[{int}]{in1}{, }\item[{int}]{in2}{, }\item[{int}]{ledc\+Ch1}{, }\item[{int}]{ledc\+Ch2}{, }\item[{uint32\+\_\+t}]{pwm\+Freq}{ = {\ttfamily 20000}, }\item[{uint8\+\_\+t}]{resolution\+Bits}{ = {\ttfamily 10}}\end{DoxyParamCaption})}



Construct a new \doxylink{class_motor_d_r_v883}{Motor\+DRV883} object. 

Constructor initializes \doxylink{class_d_r_v883}{DRV883} motor driver with ESP32 LEDC PWM configuration.


\begin{DoxyParams}{Parameters}
{\em in1} & Motor driver IN1 pin \\
\hline
{\em in2} & Motor driver IN2 pin \\
\hline
{\em ledc\+Ch1} & LEDC PWM channel for IN1 \\
\hline
{\em ledc\+Ch2} & LEDC PWM channel for IN2 \\
\hline
{\em pwm\+Freq} & PWM frequency (Hz) \\
\hline
{\em resolution\+Bits} & PWM resolution (bits)\\
\hline
\end{DoxyParams}
This constructor sets up the motor driver hardware interface by configuring GPIO pins for direction control and initializing the ESP32\textquotesingle{}s LEDC peripheral for high-\/frequency PWM generation. The LEDC peripheral provides hardware-\/ accelerated PWM with precise timing and minimal CPU overhead.

Configuration Process\+:
\begin{DoxyEnumerate}
\item Configure IN1 and IN2 GPIO pins as outputs (initially LOW for safety)
\item Initialize LEDC channels with specified frequency and resolution
\item Attach LEDC channels to the respective GPIO pins
\item Calculate maximum duty cycle value based on resolution bits
\end{DoxyEnumerate}


\begin{DoxyParams}{Parameters}
{\em in1} & GPIO pin number for motor direction control (IN1 on DRV883x) \\
\hline
{\em in2} & GPIO pin number for motor direction control (IN2 on DRV883x) \\
\hline
{\em ledc\+Ch1} & LEDC channel number for IN1 PWM (0-\/15 available on ESP32) \\
\hline
{\em ledc\+Ch2} & LEDC channel number for IN2 PWM (0-\/15 available on ESP32) \\
\hline
{\em pwm\+Freq} & PWM frequency in Hz (default\+: 20k\+Hz, above audible range) \\
\hline
{\em resolution\+Bits} & PWM resolution in bits (default\+: 10 bits = 1024 levels)\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
PWM frequency should be \texorpdfstring{$>$}{>}20k\+Hz to avoid audible motor whine 

Higher resolution bits provide finer speed control but may limit max frequency 

LEDC channels must be unique across all PWM applications in system
\end{DoxyNote}
Hardware Connections\+:
\begin{DoxyItemize}
\item ESP32 GPIO (in1) -\/\texorpdfstring{$>$}{>} DRV883x IN1 (direction control)
\item ESP32 GPIO (in2) -\/\texorpdfstring{$>$}{>} DRV883x IN2 (direction control)
\item DRV883x OUT1 -\/\texorpdfstring{$>$}{>} Motor terminal (+)
\item DRV883x OUT2 -\/\texorpdfstring{$>$}{>} Motor terminal (-\/)
\item External motor supply -\/\texorpdfstring{$>$}{>} DRV883x VM pin
\item ESP32 3.\+3V -\/\texorpdfstring{$>$}{>} DRV883x VCC pin
\end{DoxyItemize}

\begin{DoxyWarning}{Warning}
Ensure motor power supply (VM) matches motor voltage requirements 

Connect common ground between ESP32, DRV883x, and motor power supply 
\end{DoxyWarning}


\label{doc-func-members}
\Hypertarget{class_d_r_v883_doc-func-members}
\doxysubsection{Member Function Documentation}
\Hypertarget{class_d_r_v883_af60168e33988e1cb01734c692d48af94}\index{DRV883@{DRV883}!brake@{brake}}
\index{brake@{brake}!DRV883@{DRV883}}
\doxysubsubsection{\texorpdfstring{brake()}{brake()}}
{\footnotesize\ttfamily \label{class_d_r_v883_af60168e33988e1cb01734c692d48af94} 
void DRV883\+::brake (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Brake the motor (active braking by shorting both windings) 

\Hypertarget{class_d_r_v883_a7e8c99a162d755bb37a0466f13aba844}\index{DRV883@{DRV883}!setEff@{setEff}}
\index{setEff@{setEff}!DRV883@{DRV883}}
\doxysubsubsection{\texorpdfstring{setEff()}{setEff()}}
{\footnotesize\ttfamily \label{class_d_r_v883_a7e8c99a162d755bb37a0466f13aba844} 
void DRV883\+::set\+Eff (\begin{DoxyParamCaption}\item[{int}]{effort}{}\end{DoxyParamCaption})}



Set motor effort. 

Set motor effort with direction and speed control.


\begin{DoxyParams}{Parameters}
{\em effort} & Range \mbox{[}-\/100,100\mbox{]}, percent duty cycle \& direction\\
\hline
\end{DoxyParams}
This method controls both motor direction and speed through a single effort parameter. The implementation uses the DRV883x\textquotesingle{}s IN1/\+IN2 control scheme where one pin provides PWM while the other remains LOW for direction control.

Control Logic\+:
\begin{DoxyItemize}
\item Positive effort\+: Forward direction (PWM on IN1, IN2 LOW)
\item Negative effort\+: Reverse direction (PWM on IN2, IN1 LOW)
\item Zero effort\+: Motor stop (both IN1 and IN2 LOW)
\item Effort clamped to \mbox{[}-\/100, +100\mbox{]} range for safety
\end{DoxyItemize}

PWM Calculation\+:
\begin{DoxyItemize}
\item Effort percentage converted to duty cycle\+: \texorpdfstring{$\vert$}{|}effort\texorpdfstring{$\vert$}{|} \texorpdfstring{$\ast$}{*} max\+Duty / 100
\item LEDC hardware handles precise timing and waveform generation
\item Smooth speed control across full range with linear relationship
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em effort} & Motor effort as percentage \mbox{[}-\/100 to +100\mbox{]}
\begin{DoxyItemize}
\item Positive values\+: Forward rotation
\item Negative values\+: Reverse rotation ~\newline

\item Zero\+: Motor stopped
\item Values outside range automatically clamped
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Motor direction depends on wiring polarity (swap motor leads if reversed) 

PWM frequency set during construction determines switching characteristics 

Effort-\/to-\/speed relationship depends on motor characteristics and load
\end{DoxyNote}
Performance\+:
\begin{DoxyItemize}
\item Execution time\+: \texorpdfstring{$\sim$}{\string~}2-\/5 microseconds (hardware PWM update)
\item Resolution\+: 0.\+1\% effort increments with 10-\/bit PWM
\item Response time\+: \texorpdfstring{$<$}{<}100 microseconds from call to motor response 
\end{DoxyItemize}\Hypertarget{class_d_r_v883_a50bfd9a9b5f3368ffc8aa5b39a4bc623}\index{DRV883@{DRV883}!stop@{stop}}
\index{stop@{stop}!DRV883@{DRV883}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \label{class_d_r_v883_a50bfd9a9b5f3368ffc8aa5b39a4bc623} 
void DRV883\+::stop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Stop the motor (same as set\+Eff(0)) 

Stop the motor (zero effort)

Stop motor by setting effort to zero (coast mode)

This convenience method stops the motor by setting both IN1 and IN2 to LOW, allowing the motor to coast to a stop. The motor will decelerate naturally based on its inertia and mechanical load.

Stopping Behavior\+:
\begin{DoxyItemize}
\item Both PWM outputs set to 0\% duty cycle
\item Motor terminals effectively disconnected (high impedance)
\item Natural deceleration based on friction and load
\item No active braking force applied
\end{DoxyItemize}

\begin{DoxyNote}{Note}
For immediate stopping, use \doxylink{class_d_r_v883_af60168e33988e1cb01734c692d48af94}{brake()} method instead 

Motor may continue rotating briefly due to inertia 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\doxylink{class_d_r_v883_af60168e33988e1cb01734c692d48af94}{brake()} for active braking with immediate \doxylink{class_d_r_v883_a50bfd9a9b5f3368ffc8aa5b39a4bc623}{stop} 
\end{DoxySeeAlso}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/hardware/\mbox{\hyperlink{_d_r_v883_8h}{DRV883.\+h}}\item 
src/hardware/\mbox{\hyperlink{_d_r_v883_8cpp}{DRV883.\+cpp}}\end{DoxyCompactItemize}
